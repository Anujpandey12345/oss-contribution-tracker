<!DOCTYPE html>
<html>
<head>
    <title>My GitHub Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }

        .summary, .repo {
            background: white;
            padding: 15px;
            margin: 15px auto;
            width: 600px;
            border-radius: 6px;
        }

        .repo a {
            font-weight: bold;
            color: #0366d6;
            text-decoration: none;
        }

        .stats {
            font-size: 14px;
            color: #555;
            margin: 6px 0;
        }

        ul {
            padding-left: 20px;
        }

        h4 {
            margin-top: 15px;
        }
    </style>
</head>

<body>

<h2 style="text-align:center;">ğŸ“Š My GitHub Contribution Dashboard</h2>

<!-- ================= SUMMARY COUNTS ================= -->
<div class="summary">
    <h3>ğŸ“ˆ Contribution Summary</h3>
    <p>ğŸ“¦ Repositories: <strong>{{ repo_count }}</strong></p>
    <p>ğŸ” Pull Requests: <strong>{{ pr_total }}</strong>
        (Merged: {{ pr_merged }})
    </p>
    <p>ğŸ Issues: <strong>{{ issue_total }}</strong>
        (Closed: {{ issue_closed }})
    </p>
</div>

<!-- ================= REPOSITORIES ================= -->
{% if repositories %}
    {% for repo in repositories %}
        <div class="repo">

            <!-- Repository info -->
            <a href="{{ repo.html_url }}" target="_blank">
                {{ repo.full_name }}
            </a>

            {% if repo.description %}
                <p>{{ repo.description }}</p>
            {% endif %}

            <div class="stats">
                â­ {{ repo.stars|default:0 }} |
                ğŸ´ {{ repo.forks|default:0 }} |
                ğŸ§‘â€ğŸ’» {{ repo.language|default:"N/A" }}
            </div>

            <!-- Issues -->
            <h4>ğŸ Issues ({{ repo.issues.count }})</h4>
            {% if repo.issues.exists %}
                <ul>
                    {% for issue in repo.issues.all %}
                        <li>
                            <a href="{{ issue.html_url }}" target="_blank">
                                Issue #{{ issue.number }} â€“ {{ issue.title }}
                            </a>
                            ({{ issue.state }})
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No issues found.</p>
            {% endif %}

            <!-- Pull Requests -->
            <h4>ğŸ” Pull Requests ({{ repo.pull_requests.count }})</h4>
            {% if repo.pull_requests.exists %}
                <ul>
                    {% for pr in repo.pull_requests.all %}
                        <li>
                            <a href="{{ pr.html_url }}" target="_blank">
                                PR #{{ pr.number }} â€“ {{ pr.title }}
                            </a>
                            ({{ pr.state }}{% if pr.merged %}, merged{% endif %})
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No PRs found.</p>
            {% endif %}

        </div>
    {% endfor %}
{% else %}
    <p style="text-align:center;">No repositories found.</p>
{% endif %}

</body>
</html>
